"use strict";(self.webpackChunkcytube_replay=self.webpackChunkcytube_replay||[]).push([[802],{4802:(In,$,d)=>{d.r($),d.d($,{ToolsModule:()=>wn});var p=d(9808),e=d(5e3),me=d(9757),P=d(5664),q=d(7144),S=d(7429),_=d(508),D=d(6360),w=d(5529),R=d(2654),z=d(3753),fe=d(1086),U=d(6787),be=d(7739),u=d(1777),j=d(1059),ve=d(5778),b=d(7625),E=d(226),g=d(3191),F=d(1159),A=d(925),B=d(263);function Te(i,o){1&i&&e.Hsn(0)}const K=["*"];function ye(i,o){}const xe=function(i){return{animationDuration:i}},Ce=function(i,o){return{value:i,params:o}},Me=["tabListContainer"],we=["tabList"],Ie=["tabListInner"],ke=["nextPaginator"],Pe=["previousPaginator"],De=["tabBodyWrapper"],Ae=["tabHeader"];function Oe(i,o){}function Ze(i,o){if(1&i&&e.YNc(0,Oe,0,0,"ng-template",9),2&i){const t=e.oxw().$implicit;e.Q6J("cdkPortalOutlet",t.templateLabel)}}function Se(i,o){if(1&i&&e._uU(0),2&i){const t=e.oxw().$implicit;e.Oqu(t.textLabel)}}function Ee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("click",function(){const a=e.CHM(t),s=a.$implicit,r=a.index,l=e.oxw(),h=e.MAs(1);return l._handleClick(s,h,r)})("cdkFocusChange",function(a){const r=e.CHM(t).index;return e.oxw()._tabFocusChanged(a,r)}),e.TgZ(1,"div",7),e.YNc(2,Ze,1,1,"ng-template",8),e.YNc(3,Se,1,1,"ng-template",8),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.ekj("mat-tab-label-active",a.selectedIndex==n),e.Q6J("id",a._getTabLabelId(n))("disabled",t.disabled)("matRippleDisabled",t.disabled||a.disableRipple),e.uIk("tabIndex",a._getTabIndex(t,n))("aria-posinset",n+1)("aria-setsize",a._tabs.length)("aria-controls",a._getTabContentId(n))("aria-selected",a.selectedIndex==n)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),e.xp6(2),e.Q6J("ngIf",t.templateLabel),e.xp6(1),e.Q6J("ngIf",!t.templateLabel)}}function Le(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab-body",10),e.NdJ("_onCentered",function(){return e.CHM(t),e.oxw()._removeTabBodyWrapperHeight()})("_onCentering",function(a){return e.CHM(t),e.oxw()._setTabBodyWrapperHeight(a)}),e.qZA()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.ekj("mat-tab-body-active",a.selectedIndex===n),e.Q6J("id",a._getTabContentId(n))("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",a.animationDuration),e.uIk("tabindex",null!=a.contentTabIndex&&a.selectedIndex===n?a.contentTabIndex:null)("aria-labelledby",a._getTabLabelId(n))}}const Ne=new e.OlP("MatInkBarPositioner",{providedIn:"root",factory:function Re(){return o=>({left:o?(o.offsetLeft||0)+"px":"0",width:o?(o.offsetWidth||0)+"px":"0"})}});let W=(()=>{class i{constructor(t,n,a,s){this._elementRef=t,this._ngZone=n,this._inkBarPositioner=a,this._animationMode=s}alignToElement(t){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(t))}):this._setStyles(t)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(t){const n=this._inkBarPositioner(t),a=this._elementRef.nativeElement;a.style.left=n.left,a.style.width=n.width}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(Ne),e.Y36(D.Qb,8))},i.\u0275dir=e.lG2({type:i,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(t,n){2&t&&e.ekj("_mat-animation-noopable","NoopAnimations"===n._animationMode)}}),i})();const Fe=new e.OlP("MatTabContent"),Be=new e.OlP("MatTabLabel"),Qe=new e.OlP("MAT_TAB"),qe=(0,_.Id)(class{}),X=new e.OlP("MAT_TAB_GROUP");let ee=(()=>{class i extends qe{constructor(t,n){super(),this._viewContainerRef=t,this._closestTabGroup=n,this.textLabel="",this._contentPortal=null,this._stateChanges=new w.xQ,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}get content(){return this._contentPortal}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new S.UE(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&t._closestTab===this&&(this._templateLabel=t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.s_b),e.Y36(X,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-tab"]],contentQueries:function(t,n,a){if(1&t&&(e.Suo(a,Be,5),e.Suo(a,Fe,7,e.Rgc)),2&t){let s;e.iGM(s=e.CRH())&&(n.templateLabel=s.first),e.iGM(s=e.CRH())&&(n._explicitContent=s.first)}},viewQuery:function(t,n){if(1&t&&e.Gf(e.Rgc,7),2&t){let a;e.iGM(a=e.CRH())&&(n._implicitContent=a.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},exportAs:["matTab"],features:[e._Bn([{provide:Qe,useExisting:i}]),e.qOj,e.TTD],ngContentSelectors:K,decls:1,vars:0,template:function(t,n){1&t&&(e.F$t(),e.YNc(0,Te,1,0,"ng-template"))},encapsulation:2}),i})();const Je={translateTab:(0,u.X$)("translateTab",[(0,u.SB)("center, void, left-origin-center, right-origin-center",(0,u.oB)({transform:"none"})),(0,u.SB)("left",(0,u.oB)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),(0,u.SB)("right",(0,u.oB)({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),(0,u.eR)("* => left, * => right, left => center, right => center",(0,u.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),(0,u.eR)("void => left-origin-center",[(0,u.oB)({transform:"translate3d(-100%, 0, 0)"}),(0,u.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),(0,u.eR)("void => right-origin-center",[(0,u.oB)({transform:"translate3d(100%, 0, 0)"}),(0,u.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let Ye=(()=>{class i extends S.Pl{constructor(t,n,a,s){super(t,n,s),this._host=a,this._centeringSub=R.w.EMPTY,this._leavingSub=R.w.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe((0,j.O)(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e._Vd),e.Y36(e.s_b),e.Y36((0,e.Gpc)(()=>te)),e.Y36(p.K0))},i.\u0275dir=e.lG2({type:i,selectors:[["","matTabBodyHost",""]],features:[e.qOj]}),i})(),He=(()=>{class i{constructor(t,n,a){this._elementRef=t,this._dir=n,this._dirChangeSubscription=R.w.EMPTY,this._translateTabComplete=new w.xQ,this._onCentering=new e.vpe,this._beforeCentering=new e.vpe,this._afterLeavingCenter=new e.vpe,this._onCentered=new e.vpe(!0),this.animationDuration="500ms",n&&(this._dirChangeSubscription=n.change.subscribe(s=>{this._computePositionAnimationState(s),a.markForCheck()})),this._translateTabComplete.pipe((0,ve.x)((s,r)=>s.fromState===r.fromState&&s.toState===r.toState)).subscribe(s=>{this._isCenterPosition(s.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(s.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(t){this._positionIndex=t,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){const n=this._isCenterPosition(t.toState);this._beforeCentering.emit(n),n&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t}_computePositionAnimationState(t=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==t?"left":"right":this._positionIndex>0?"ltr"==t?"right":"left":"center"}_computePositionFromOrigin(t){const n=this._getLayoutDirection();return"ltr"==n&&t<=0||"rtl"==n&&t>0?"left-origin-center":"right-origin-center"}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(E.Is,8),e.Y36(e.sBO))},i.\u0275dir=e.lG2({type:i,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),i})(),te=(()=>{class i extends He{constructor(t,n,a){super(t,n,a)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(E.Is,8),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-tab-body"]],viewQuery:function(t,n){if(1&t&&e.Gf(S.Pl,5),2&t){let a;e.iGM(a=e.CRH())&&(n._portalHost=a.first)}},hostAttrs:[1,"mat-tab-body"],features:[e.qOj],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.NdJ("@translateTab.start",function(s){return n._onTranslateTabStarted(s)})("@translateTab.done",function(s){return n._translateTabComplete.next(s)}),e.YNc(2,ye,0,0,"ng-template",2),e.qZA()),2&t&&e.Q6J("@translateTab",e.WLB(3,Ce,n._position,e.VKq(1,xe,n.animationDuration)))},directives:[Ye],styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[Je.translateTab]}}),i})();const ie=new e.OlP("MAT_TABS_CONFIG"),ze=(0,_.Id)(class{});let ne=(()=>{class i extends ze{constructor(t){super(),this.elementRef=t}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(t,n){2&t&&(e.uIk("aria-disabled",!!n.disabled),e.ekj("mat-tab-disabled",n.disabled))},inputs:{disabled:"disabled"},features:[e.qOj]}),i})();const ae=(0,A.i$)({passive:!0});let Ge=(()=>{class i{constructor(t,n,a,s,r,l,h){this._elementRef=t,this._changeDetectorRef=n,this._viewportRuler=a,this._dir=s,this._ngZone=r,this._platform=l,this._animationMode=h,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new w.xQ,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new w.xQ,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new e.vpe,this.indexFocused=new e.vpe,r.runOutsideAngular(()=>{(0,z.R)(t.nativeElement,"mouseleave").pipe((0,b.R)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=(0,g.su)(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}ngAfterViewInit(){(0,z.R)(this._previousPaginator.nativeElement,"touchstart",ae).pipe((0,b.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),(0,z.R)(this._nextPaginator.nativeElement,"touchstart",ae).pipe((0,b.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:(0,fe.of)("ltr"),n=this._viewportRuler.change(150),a=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new P.Em(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(a):a(),(0,U.T)(t,n,this._items.changes).pipe((0,b.R)(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>Promise.resolve().then(a)),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe((0,b.R)(this._destroyed)).subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!(0,F.Vb)(t))switch(t.keyCode){case F.K5:case F.L_:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t));break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){if(!this._items)return!0;const n=this._items?this._items.toArray()[t]:null;return!!n&&!n.disabled}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const n=this._tabListContainer.nativeElement;n.scrollLeft="ltr"==this._getLayoutDirection()?0:n.scrollWidth-n.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,n="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(n)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const n=this._items?this._items.toArray()[t]:null;if(!n)return;const a=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:s,offsetWidth:r}=n.elementRef.nativeElement;let l,h;"ltr"==this._getLayoutDirection()?(l=s,h=l+r):(h=this._tabListInner.nativeElement.offsetWidth-s,l=h-r);const f=this.scrollDistance,v=this.scrollDistance+a;l<f?this.scrollDistance-=f-l+60:h>v&&(this.scrollDistance+=h-v+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,n=t?t.elementRef.nativeElement:null;n?this._inkBar.alignToElement(n):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,n){n&&null!=n.button&&0!==n.button||(this._stopInterval(),(0,be.H)(650,100).pipe((0,b.R)((0,U.T)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:a,distance:s}=this._scrollHeader(t);(0===s||s>=a)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const n=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(n,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:n,distance:this._scrollDistance}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(B.rL),e.Y36(E.Is,8),e.Y36(e.R0b),e.Y36(A.t4),e.Y36(D.Qb,8))},i.\u0275dir=e.lG2({type:i,inputs:{disablePagination:"disablePagination"}}),i})(),Ve=(()=>{class i extends Ge{constructor(t,n,a,s,r,l,h){super(t,n,a,s,r,l,h),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=(0,g.Ig)(t)}_itemSelected(t){t.preventDefault()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(B.rL),e.Y36(E.Is,8),e.Y36(e.R0b),e.Y36(A.t4),e.Y36(D.Qb,8))},i.\u0275dir=e.lG2({type:i,inputs:{disableRipple:"disableRipple"},features:[e.qOj]}),i})(),$e=(()=>{class i extends Ve{constructor(t,n,a,s,r,l,h){super(t,n,a,s,r,l,h)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(B.rL),e.Y36(E.Is,8),e.Y36(e.R0b),e.Y36(A.t4),e.Y36(D.Qb,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-tab-header"]],contentQueries:function(t,n,a){if(1&t&&e.Suo(a,ne,4),2&t){let s;e.iGM(s=e.CRH())&&(n._items=s)}},viewQuery:function(t,n){if(1&t&&(e.Gf(W,7),e.Gf(Me,7),e.Gf(we,7),e.Gf(Ie,7),e.Gf(ke,5),e.Gf(Pe,5)),2&t){let a;e.iGM(a=e.CRH())&&(n._inkBar=a.first),e.iGM(a=e.CRH())&&(n._tabListContainer=a.first),e.iGM(a=e.CRH())&&(n._tabList=a.first),e.iGM(a=e.CRH())&&(n._tabListInner=a.first),e.iGM(a=e.CRH())&&(n._nextPaginator=a.first),e.iGM(a=e.CRH())&&(n._previousPaginator=a.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(t,n){2&t&&e.ekj("mat-tab-header-pagination-controls-enabled",n._showPaginationControls)("mat-tab-header-rtl","rtl"==n._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[e.qOj],ngContentSelectors:K,decls:14,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"div",0,1),e.NdJ("click",function(){return n._handlePaginatorClick("before")})("mousedown",function(s){return n._handlePaginatorPress("before",s)})("touchend",function(){return n._stopInterval()}),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3,4),e.NdJ("keydown",function(s){return n._handleKeydown(s)}),e.TgZ(5,"div",5,6),e.NdJ("cdkObserveContent",function(){return n._onContentChanges()}),e.TgZ(7,"div",7,8),e.Hsn(9),e.qZA(),e._UZ(10,"mat-ink-bar"),e.qZA(),e.qZA(),e.TgZ(11,"div",9,10),e.NdJ("mousedown",function(s){return n._handlePaginatorPress("after",s)})("click",function(){return n._handlePaginatorClick("after")})("touchend",function(){return n._stopInterval()}),e._UZ(13,"div",2),e.qZA()),2&t&&(e.ekj("mat-tab-header-pagination-disabled",n._disableScrollBefore),e.Q6J("matRippleDisabled",n._disableScrollBefore||n.disableRipple),e.xp6(5),e.ekj("_mat-animation-noopable","NoopAnimations"===n._animationMode),e.xp6(6),e.ekj("mat-tab-header-pagination-disabled",n._disableScrollAfter),e.Q6J("matRippleDisabled",n._disableScrollAfter||n.disableRipple))},directives:[_.wG,q.wD,W],styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n"],encapsulation:2}),i})(),Ke=0;class We{}const Xe=(0,_.pj)((0,_.Kr)(class{constructor(i){this._elementRef=i}}),"primary");let et=(()=>{class i extends Xe{constructor(t,n,a,s){var r;super(t),this._changeDetectorRef=n,this._animationMode=s,this._tabs=new e.n_E,this._indexToSelect=0,this._tabBodyWrapperHeight=0,this._tabsSubscription=R.w.EMPTY,this._tabLabelSubscription=R.w.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new e.vpe,this.focusChange=new e.vpe,this.animationDone=new e.vpe,this.selectedTabChange=new e.vpe(!0),this._groupId=Ke++,this.animationDuration=a&&a.animationDuration?a.animationDuration:"500ms",this.disablePagination=!(!a||null==a.disablePagination)&&a.disablePagination,this.dynamicHeight=!(!a||null==a.dynamicHeight)&&a.dynamicHeight,this.contentTabIndex=null!==(r=null==a?void 0:a.contentTabIndex)&&void 0!==r?r:null}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(t){this._dynamicHeight=(0,g.Ig)(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=(0,g.su)(t,null)}get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t+"")?t+"ms":t}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(t){this._contentTabIndex=(0,g.su)(t,null)}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const n=this._elementRef.nativeElement;n.classList.remove(`mat-background-${this.backgroundColor}`),t&&n.classList.add(`mat-background-${t}`),this._backgroundColor=t}ngAfterContentChecked(){const t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){const n=null==this._selectedIndex;if(!n){this.selectedTabChange.emit(this._createChangeEvent(t));const a=this._tabBodyWrapper.nativeElement;a.style.minHeight=a.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((a,s)=>a.isActive=s===t),n||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((n,a)=>{n.position=a-t,null!=this._selectedIndex&&0==n.position&&!n.origin&&(n.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{if(this._clampTabIndex(this._indexToSelect)===this._selectedIndex){const n=this._tabs.toArray();for(let a=0;a<n.length;a++)if(n[a].isActive){this._indexToSelect=this._selectedIndex=a;break}}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe((0,j.O)(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(n=>n._closestTabGroup===this||!n._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}focusTab(t){const n=this._tabHeader;n&&(n.focusIndex=t)}_focusChanged(t){this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){const n=new We;return n.index=t,this._tabs&&this._tabs.length&&(n.tab=this._tabs.toArray()[t]),n}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,U.T)(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const n=this._tabBodyWrapper.nativeElement;n.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(n.style.height=t+"px")}_removeTabBodyWrapperHeight(){const t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,n,a){t.disabled||(this.selectedIndex=n.focusIndex=a)}_getTabIndex(t,n){return t.disabled?null:this.selectedIndex===n?0:-1}_tabFocusChanged(t,n){t&&"mouse"!==t&&"touch"!==t&&(this._tabHeader.focusIndex=n)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(ie,8),e.Y36(D.Qb,8))},i.\u0275dir=e.lG2({type:i,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[e.qOj]}),i})(),tt=(()=>{class i extends et{constructor(t,n,a,s){super(t,n,a,s)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(ie,8),e.Y36(D.Qb,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-tab-group"]],contentQueries:function(t,n,a){if(1&t&&e.Suo(a,ee,5),2&t){let s;e.iGM(s=e.CRH())&&(n._allTabs=s)}},viewQuery:function(t,n){if(1&t&&(e.Gf(De,5),e.Gf(Ae,5)),2&t){let a;e.iGM(a=e.CRH())&&(n._tabBodyWrapper=a.first),e.iGM(a=e.CRH())&&(n._tabHeader=a.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(t,n){2&t&&e.ekj("mat-tab-group-dynamic-height",n.dynamicHeight)("mat-tab-group-inverted-header","below"===n.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[e._Bn([{provide:X,useExisting:i}]),e.qOj],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-tab-header",0,1),e.NdJ("indexFocused",function(s){return n._focusChanged(s)})("selectFocusedIndex",function(s){return n.selectedIndex=s}),e.YNc(2,Ee,4,14,"div",2),e.qZA(),e.TgZ(3,"div",3,4),e.YNc(5,Le,1,9,"mat-tab-body",5),e.qZA()),2&t&&(e.Q6J("selectedIndex",n.selectedIndex||0)("disableRipple",n.disableRipple)("disablePagination",n.disablePagination),e.xp6(2),e.Q6J("ngForOf",n._tabs),e.xp6(1),e.ekj("_mat-animation-noopable","NoopAnimations"===n._animationMode),e.xp6(2),e.Q6J("ngForOf",n._tabs))},directives:[$e,p.sg,ne,_.wG,P.kH,p.O5,S.Pl,te],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),i})(),it=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,_.BQ,S.eL,_.si,q.Q8,P.rt],_.BQ]}),i})();var c=d(3075),C=d(6844),se=d(594),m=d(7322),O=d(7531),T=d(4107),y=d(7423);function nt(i,o){if(1&i&&(e.TgZ(0,"mat-form-field",2),e.TgZ(1,"mat-label"),e._uU(2,"File version"),e.qZA(),e._UZ(3,"input",3),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("disabled",!0)("value",t.getVersionString())}}function at(i,o){if(1&i&&(e.TgZ(0,"mat-form-field",2),e.TgZ(1,"mat-label"),e._uU(2,"File name"),e.qZA(),e._UZ(3,"input",4),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("disabled",!0)("value",t.file.fileName)}}function ot(i,o){if(1&i&&(e.TgZ(0,"mat-form-field",2),e.TgZ(1,"mat-label"),e._uU(2,"File path"),e.qZA(),e._UZ(3,"input",5),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("formControl",t.filePath)}}function st(i,o){if(1&i&&(e.TgZ(0,"mat-option",8),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("value",n.sites[t]),e.xp6(1),e.Oqu(t)}}function rt(i,o){if(1&i&&(e.TgZ(0,"mat-form-field",2),e.TgZ(1,"mat-label"),e._uU(2,"Site"),e.qZA(),e.TgZ(3,"mat-select",6),e.YNc(4,st,2,2,"mat-option",7),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("formControl",t.site),e.xp6(1),e.Q6J("ngForOf",t.siteKeys)}}function lt(i,o){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.channelName.errors?null:t.channelName.errors.errors.join(", "))}}function dt(i,o){if(1&i&&(e.TgZ(0,"mat-form-field",2),e.TgZ(1,"mat-label"),e._uU(2,"Channel name"),e.qZA(),e._UZ(3,"input",9),e.YNc(4,lt,2,1,"mat-error",10),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("formControl",t.channelName),e.xp6(1),e.Q6J("ngIf",t.channelName.invalid)}}function ct(i,o){if(1&i&&(e.TgZ(0,"mat-form-field",2),e.TgZ(1,"mat-label"),e._uU(2,"Channel path"),e.qZA(),e._UZ(3,"input",3),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("disabled",!0)("value",t.file.channelPath)}}function pt(i,o){if(1&i&&(e.TgZ(0,"mat-form-field",2),e.TgZ(1,"mat-label"),e._uU(2,"Start"),e.qZA(),e._UZ(3,"input",3),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("disabled",!0)("value",t.U.timestampToDateTimeString(t.file.start))}}function ht(i,o){if(1&i&&(e.TgZ(0,"mat-form-field",2),e.TgZ(1,"mat-label"),e._uU(2,"End"),e.qZA(),e._UZ(3,"input",3),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("disabled",!0)("value",t.U.timestampToDateTimeString(t.file.end))}}function ut(i,o){if(1&i&&(e.TgZ(0,"mat-form-field",2),e.TgZ(1,"mat-label"),e._uU(2,"Capture name"),e.qZA(),e._UZ(3,"input",11),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("formControl",t.name)}}function _t(i,o){if(1&i&&(e.TgZ(0,"mat-form-field",2),e.TgZ(1,"mat-label"),e._uU(2,"Events count"),e.qZA(),e._UZ(3,"input",3),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("disabled",!0)("value",t.file.events.length)}}function gt(i,o){1&i&&(e.TgZ(0,"div",12),e.TgZ(1,"button",13),e._uU(2,"Add another JSON"),e.qZA(),e.TgZ(3,"button",14),e._uU(4,"Delete this JSON"),e.qZA(),e.qZA())}let mt=(()=>{class i{constructor(){this.U=C.c,this.filePath=new c.NI,this.site=new c.NI,this.channelName=new c.NI("replay",[t=>this.getChannelNameValidationErrors(t.value)]),this.name=new c.NI,this.filePathSubscription=this.filePath.valueChanges.subscribe(t=>{this.filePathChange(t)}),this.siteSubscription=this.site.valueChanges.subscribe(t=>{this.siteChange(t)}),this.channelNameSubscription=this.channelName.valueChanges.subscribe(t=>{null==this.getChannelNameValidationErrors(t)&&this.channelNameChange(t)}),this.nameSubscription=this.name.valueChanges.subscribe(t=>{this.nameChange(t)}),this.sites=se.T,this.siteKeys=Object.keys(se.T),this._file=null}ngOnInit(){}ngOnDestroy(){this.unsubAll()}unsubAll(){this.filePathSubscription.unsubscribe(),this.siteSubscription.unsubscribe(),this.channelNameSubscription.unsubscribe(),this.nameSubscription.unsubscribe()}get ready(){return null!=this._file}get file(){if(null!=this._file)return this._file;throw new Error("File was not ready")}set file(t){this._file=t,this.onFile()}getVersionString(){let t="";return null!=this.file&&(t+=this.file.fileVersion,"string"==typeof this.file.upgradedFrom&&(t+=" (upgraded from "+this.file.upgradedFrom+")")),t}onFile(){this.filePath.setValue(this.file.filePath),this.site.setValue(this.file.site),this.channelName.setValue(this.file.channelName),this.name.setValue(this.file.name)}getChannelNameValidationErrors(t){let n=[];return""===t?n.push("Cannnel name cannot be empty"):/^[\w-]+$/.test(t)||n.push("Channel name may only consist of a-z, A-Z, 0-9, - and _"),0===n.length?null:{errors:n}}filePathChange(t){this.file.filePath!==t&&(this.file.filePath=t,this.file.edited=!0)}siteChange(t){this.file.site!==t&&(this.file.site=t,this.file.edited=!0)}channelNameChange(t){this.file.channelName!==t&&(this.file.channelName=t,this.file.edited=!0)}nameChange(t){this.file.name!==t&&(this.file.name=t,this.file.edited=!0)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-file-tab"]],inputs:{file:"file"},decls:11,vars:11,consts:[["appearance","fill","color","accent",4,"ngIf"],["class","buttons",4,"ngIf"],["appearance","fill","color","accent"],["matInput","",3,"disabled","value"],["matInput","","placeholder","MLPrewatchstream_20211212121212.json",3,"disabled","value"],["matInput","","placeholder","2022.01.18/",3,"formControl"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","placeholder","replay","required","",3,"formControl"],[4,"ngIf"],["matInput","","placeholder","2022.03.12 (new content)",3,"formControl"],[1,"buttons"],["mat-raised-button","",1,"add-button"],["mat-raised-button",""]],template:function(t,n){1&t&&(e.YNc(0,nt,4,2,"mat-form-field",0),e.YNc(1,at,4,2,"mat-form-field",0),e.YNc(2,ot,4,1,"mat-form-field",0),e.YNc(3,rt,5,2,"mat-form-field",0),e.YNc(4,dt,5,2,"mat-form-field",0),e.YNc(5,ct,4,2,"mat-form-field",0),e.YNc(6,pt,4,2,"mat-form-field",0),e.YNc(7,ht,4,2,"mat-form-field",0),e.YNc(8,ut,4,1,"mat-form-field",0),e.YNc(9,_t,4,2,"mat-form-field",0),e.YNc(10,gt,5,0,"div",1)),2&t&&(e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",n.ready))},directives:[p.O5,m.KE,m.hX,O.Nt,c.Fj,c.JJ,c.oH,T.gD,p.sg,_.ey,c.Q7,m.TO,y.lW],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;max-width:1900px;margin:0 auto}[_nghost-%COMP%] > .mat-form-field[_ngcontent-%COMP%]{min-width:360px;margin:8px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.add-button[_ngcontent-%COMP%]{margin-right:10px}"]}),i})();var Q=d(3668);function ft(i,o){if(1&i&&(e.TgZ(0,"a",10),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.Q6J("href",t.summary.link,e.LSH),e.xp6(1),e.Oqu(t.summary.title)}}function bt(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(t.summary.title)}}function vt(i,o){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,ft,2,2,"a",8),e.YNc(2,bt,2,1,"span",9),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null!=t.summary.link),e.xp6(1),e.Q6J("ngIf",null==t.summary.link)}}function Tt(i,o){1&i&&e._UZ(0,"div",11)}function yt(i,o){if(1&i&&(e.TgZ(0,"div",2),e.TgZ(1,"div",3),e._uU(2),e.qZA(),e.TgZ(3,"div",4),e._uU(4),e.qZA(),e.YNc(5,vt,3,2,"div",5),e.YNc(6,Tt,1,0,"div",6),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.U.timestampToDateTimeString(t.event.time)),e.xp6(2),e.Oqu(t.event.type),e.xp6(1),e.Q6J("ngIf",null!=t.summary),e.xp6(1),e.Q6J("ngIf",null==t.summary)}}function xt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",12),e.TgZ(1,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.editing=!a.editing}),e.TgZ(2,"mat-icon"),e._uU(3,"expand_more"),e.qZA(),e.qZA(),e.TgZ(4,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().delete.emit(!0)}),e.TgZ(5,"mat-icon"),e._uU(6,"delete"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Tol(t.editing?"expand editing":"expand")}}let Ct=(()=>{class i{constructor(){this._editing=!1,this._event=null,this._file=null,this.U=C.c,this.editingChange=new e.vpe,this.delete=new e.vpe}ngOnInit(){}get editing(){return this._editing}set editing(t){this._editing!==t&&(this._editing=t,this.editingChange.emit(t))}get ready(){return null!=this._event&&null!=this._file}get event(){if(null!=this._event)return this._event;throw new Error("Event not ready")}set event(t){this._event=t}get file(){if(null!=this._file)return this._file;throw new Error("File not ready")}set file(t){this._file=t}get summary(){if("changeMedia"===this.event.type){let t=C.c.mediaToUrl(this.file.site,C.c.pageVersion(this.file.site,this.file.start),this.event.data[0]);return{title:this.event.data[0].title,link:t}}return null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-header"]],inputs:{event:"event",file:"file"},outputs:{editingChange:"editingChange",delete:"delete"},decls:2,vars:2,consts:[["class","head",4,"ngIf"],["class","buttons",4,"ngIf"],[1,"head"],[1,"time"],[1,"type"],["class","summary",4,"ngIf"],["class","summary-empty",4,"ngIf"],[1,"summary"],["target","_blank",3,"href",4,"ngIf"],[4,"ngIf"],["target","_blank",3,"href"],[1,"summary-empty"],[1,"buttons"],["mat-icon-button","",3,"click"]],template:function(t,n){1&t&&(e.YNc(0,yt,7,4,"div",0),e.YNc(1,xt,7,2,"div",1)),2&t&&(e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",n.ready))},directives:[p.O5,y.lW,Q.Hw],styles:["[_nghost-%COMP%]{display:flex}.head[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;flex-wrap:wrap;overflow:hidden}.time[_ngcontent-%COMP%], .type[_ngcontent-%COMP%]{min-width:150px}.summary[_ngcontent-%COMP%]{flex:1;min-width:200px}.summary[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#fff}.summary-empty[_ngcontent-%COMP%]{flex:1}.expand[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transition:transform .15s ease-in-out;transform:rotate(0)}.expand.editing[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}"]}),i})();function Mt(i,o){if(1&i&&(e.TgZ(0,"mat-form-field",2),e.TgZ(1,"mat-label"),e._uU(2,"Event type"),e.qZA(),e.TgZ(3,"mat-select",3),e.TgZ(4,"mat-option",4),e._uU(5,"Change Media"),e.qZA(),e.TgZ(6,"mat-option",5),e._uU(7,"Custom"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("formControl",t.type)}}function wt(i,o){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.typeName.errors?null:t.typeName.errors.errors.join(", "))}}function It(i,o){if(1&i&&(e.TgZ(0,"mat-form-field",6),e.TgZ(1,"mat-label"),e._uU(2,"Event type name"),e.qZA(),e._UZ(3,"input",7),e.YNc(4,wt,2,1,"mat-error",8),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("formControl",t.typeName),e.xp6(1),e.Q6J("ngIf",t.typeName.invalid)}}var I=(()=>{return(i=I||(I={})).ChangeMedia="changeMedia",i.Custom="custom",I;var i})();let kt=(()=>{class i{constructor(){this._event=null,this._file=null,this.prevCustomName=null,this.type=new c.NI,this.typeName=new c.NI("eventName",[t=>""===t.value?{errors:["Event name empty"]}:null]),this.typeSubscription=this.type.valueChanges.subscribe(t=>{this.typeChange(t)}),this.typeNameSubscription=this.typeName.valueChanges.subscribe(t=>{""!==t&&this.typeNameChange(t)})}ngOnInit(){}ngOnDestroy(){this.unsubAll()}unsubAll(){this.typeSubscription.unsubscribe(),this.typeNameSubscription.unsubscribe()}get ready(){return null!=this._event&&null!=this._file}getType(){return function Pt(i){let o=I.Custom;return"changeMedia"===i&&(o=I.ChangeMedia),o}(this.event.type)}get event(){if(null!=this._event)return this._event;throw new Error("Event not ready")}set event(t){this._event=t,this.onEvent()}get file(){if(null!=this._file)return this._file;throw new Error("File not ready")}set file(t){this._file=t}typeChange(t){var n;if(this.getType()!==t)if(t===I.Custom){let a=null!==(n=this.prevCustomName)&&void 0!==n?n:"eventName";this.event.type=a,this.file.edited=!0,this.typeName.setValue(a)}else this.prevCustomName=this.event.type,this.event.type=function Dt(i){let o="eventName";return i===I.ChangeMedia&&(o="changeMedia"),o}(t),this.file.edited=!0,this.typeName.setValue(this.event.type)}typeNameChange(t){if(this.event.type!==t){this.event.type=t,this.file.edited=!0;let n=this.getType();n!==I.Custom&&this.type.setValue(n)}}onEvent(){let t=this.getType();this.typeName.setValue(this.event.type),this.type.setValue(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-type"]],inputs:{event:"event",file:"file"},decls:2,vars:2,consts:[["appearance","fill","color","accent",4,"ngIf"],["appearance","fill","color","accent","class","type-name",4,"ngIf"],["appearance","fill","color","accent"],[3,"formControl"],["value","changeMedia"],["value","custom"],["appearance","fill","color","accent",1,"type-name"],["matInput","","placeholder","chatMsg","required","",3,"formControl"],[4,"ngIf"]],template:function(t,n){1&t&&(e.YNc(0,Mt,8,1,"mat-form-field",0),e.YNc(1,It,5,2,"mat-form-field",1)),2&t&&(e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",n.ready&&"custom"===n.getType()))},directives:[p.O5,m.KE,m.hX,T.gD,c.JJ,c.oH,_.ey,O.Nt,c.Fj,c.Q7,m.TO],styles:["[_nghost-%COMP%]{display:block}.type-name[_ngcontent-%COMP%]{margin-left:10px}"]}),i})(),At=(()=>{class i{constructor(){this._data=null,this._file=null}ngOnInit(){}get ready(){return null!=this._data&&null!==this._file}get file(){if(null!=this._file)return this._file;throw new Error("File was not ready")}set file(t){this._file=t}get data(){if(null!=this._data)return this._data;throw new Error("Data was not ready")}set data(t){this._data=t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-change-media"]],inputs:{file:"file",data:"data"},decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"TODO: edit changeMedia"),e.qZA())},styles:[""]}),i})();const Ot=["thumbContainer"],Zt=["toggleBar"],St=["input"],Et=function(i){return{enterDuration:i}},Lt=["*"],Nt=new e.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let Rt=0;const Ft={provide:c.JU,useExisting:(0,e.Gpc)(()=>re),multi:!0};class Bt{constructor(o,t){this.source=o,this.checked=t}}const Qt=(0,_.sb)((0,_.pj)((0,_.Kr)((0,_.Id)(class{constructor(i){this._elementRef=i}}))));let re=(()=>{class i extends Qt{constructor(t,n,a,s,r,l){super(t),this._focusMonitor=n,this._changeDetectorRef=a,this.defaults=r,this._onChange=h=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++Rt,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new e.vpe,this.toggleChange=new e.vpe,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=r.color||"accent",this._noopAnimations="NoopAnimations"===l}get required(){return this._required}set required(t){this._required=(0,g.Ig)(t)}get checked(){return this._checked}set checked(t){this._checked=(0,g.Ig)(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{t||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}focus(t,n){n?this._focusMonitor.focusVia(this._inputElement,n,t):this._inputElement.nativeElement.focus(t)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new Bt(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(P.tE),e.Y36(e.sBO),e.$8M("tabindex"),e.Y36(Nt),e.Y36(D.Qb,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-slide-toggle"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Ot,5),e.Gf(Zt,5),e.Gf(St,5)),2&t){let a;e.iGM(a=e.CRH())&&(n._thumbEl=a.first),e.iGM(a=e.CRH())&&(n._thumbBarEl=a.first),e.iGM(a=e.CRH())&&(n._inputElement=a.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(t,n){2&t&&(e.Ikx("id",n.id),e.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null),e.ekj("mat-checked",n.checked)("mat-disabled",n.disabled)("mat-slide-toggle-label-before","before"==n.labelPosition)("_mat-animation-noopable",n._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[e._Bn([Ft]),e.qOj],ngContentSelectors:Lt,decls:16,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,n){if(1&t&&(e.F$t(),e.TgZ(0,"label",0,1),e.TgZ(2,"div",2,3),e.TgZ(4,"input",4,5),e.NdJ("change",function(s){return n._onChangeEvent(s)})("click",function(s){return n._onInputClick(s)}),e.qZA(),e.TgZ(6,"div",6,7),e._UZ(8,"div",8),e.TgZ(9,"div",9),e._UZ(10,"div",10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"span",11,12),e.NdJ("cdkObserveContent",function(){return n._onLabelTextChange()}),e.TgZ(13,"span",13),e._uU(14,"\xa0"),e.qZA(),e.Hsn(15),e.qZA(),e.qZA()),2&t){const a=e.MAs(1),s=e.MAs(12);e.uIk("for",n.inputId),e.xp6(2),e.ekj("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),e.xp6(2),e.Q6J("id",n.inputId)("required",n.required)("tabIndex",n.tabIndex)("checked",n.checked)("disabled",n.disabled),e.uIk("name",n.name)("aria-checked",n.checked.toString())("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby)("aria-describedby",n.ariaDescribedby),e.xp6(5),e.Q6J("matRippleTrigger",a)("matRippleDisabled",n.disableRipple||n.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",e.VKq(18,Et,n._noopAnimations?0:150))}},directives:[_.wG,q.wD],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),i})(),le=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})(),Yt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[le,_.si,_.BQ,q.Q8],le,_.BQ]}),i})();var x=d(1725);function Ht(i,o){if(1&i&&(e.TgZ(0,"mat-option",8),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("value",n.dataTypes[t]),e.xp6(1),e.hij(" ",t,"")}}function zt(i,o){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(null==t.dataValue.errors?null:t.dataValue.errors.errors.join(", "))}}function Ut(i,o){if(1&i&&(e.TgZ(0,"mat-form-field",9),e.TgZ(1,"mat-label"),e._uU(2,"Value"),e.qZA(),e._UZ(3,"input",10),e.YNc(4,zt,2,1,"mat-error",11),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("formControl",t.dataValue),e.xp6(1),e.Q6J("ngIf",t.dataValue.invalid)}}function jt(i,o){if(1&i&&(e.TgZ(0,"div",3),e.TgZ(1,"mat-form-field",4),e.TgZ(2,"mat-label"),e._uU(3,"Type"),e.qZA(),e.TgZ(4,"mat-select",5),e.YNc(5,Ht,2,2,"mat-option",6),e.qZA(),e.qZA(),e.YNc(6,Ut,5,2,"mat-form-field",7),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("formControl",t.dataType),e.xp6(1),e.Q6J("ngForOf",t.dataTypeKeys),e.xp6(1),e.Q6J("ngIf","string"===t.getDataType()||"number"===t.getDataType()||"boolean"===t.getDataType())}}function Gt(i,o){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw().index,n=e.oxw(2);e.xp6(1),e.hij("",null==n.dataKeysControls[t].errors?null:n.dataKeysControls[t].errors.errors.join(", ")," ")}}function Vt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index;return e.oxw(2).dataKeysSave[a]()}),e._uU(1,"Save name"),e.qZA()}}function $t(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e.TgZ(1,"mat-form-field",4),e.TgZ(2,"mat-label"),e._uU(3,"Field name"),e.qZA(),e._UZ(4,"input",10),e.YNc(5,Gt,2,1,"mat-error",11),e.qZA(),e.YNc(6,Vt,2,0,"button",15),e.TgZ(7,"button",17),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw(2).dataKeysDelete[s]()}),e._uU(8,"Delete field"),e.qZA(),e.TgZ(9,"app-data",18),e.NdJ("dataChange",function(a){const r=e.CHM(t).$implicit;return e.oxw(2).dataSetKey(r,a)}),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.xp6(4),e.Q6J("formControl",a.dataKeysControls[n]),e.xp6(1),e.Q6J("ngIf",a.dataKeysControls[n].invalid),e.xp6(1),e.Q6J("ngIf",a.dataKeysControls[n].value!==t),e.xp6(3),e.Q6J("file",a.file)("data",a.data[t])}}function Kt(i,o){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij("",null==t.newFieldName.errors?null:t.newFieldName.errors.errors.join(", ")," ")}}function Wt(i,o){if(1&i&&(e.TgZ(0,"mat-option",8),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("value",n.dataTypes[t]),e.xp6(1),e.hij(" ",t,"")}}function Xt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addNewField()}),e._uU(1,"Add new field"),e.qZA()}}function ei(i,o){if(1&i&&(e.TgZ(0,"div",12),e.YNc(1,$t,10,5,"div",13),e.TgZ(2,"mat-form-field",4),e.TgZ(3,"mat-label"),e._uU(4,"New field name"),e.qZA(),e._UZ(5,"input",10),e.YNc(6,Kt,2,1,"mat-error",11),e.qZA(),e.TgZ(7,"mat-form-field",14),e.TgZ(8,"mat-label"),e._uU(9,"New field type"),e.qZA(),e.TgZ(10,"mat-select",5),e.YNc(11,Wt,2,2,"mat-option",6),e.qZA(),e.qZA(),e.YNc(12,Xt,2,0,"button",15),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.dataKeys),e.xp6(4),e.Q6J("formControl",t.newFieldName),e.xp6(1),e.Q6J("ngIf",t.newFieldName.invalid),e.xp6(4),e.Q6J("formControl",t.newFieldType),e.xp6(1),e.Q6J("ngForOf",t.dataTypeKeys),e.xp6(1),e.Q6J("ngIf",t.validFieldName(t.newFieldName.value))}}function ti(i,o){1&i&&(e.TgZ(0,"div",19),e.TgZ(1,"p"),e._uU(2,"TODO: edit arrays"),e.qZA(),e.qZA())}let ii=(()=>{class i{constructor(){this.hasData=!1,this._file=null,this.dataKeys=[],this.dataKeysControls=[],this.dataKeysSave=[],this.dataKeysDelete=[],this.dataChange=new e.vpe,this.dataType=new c.NI,this.dataValue=new c.NI(null,[t=>{let n=this.getValueOrErrors(t.value);return n instanceof Array?{errors:n}:null}]),this.newFieldType=new c.NI(x.g.String),this.newFieldName=new c.NI("",[t=>this.hasData&&C.c.dataToDataType(this.data)===x.g.Object&&!this.validFieldName(t.value)?{errors:["This field already exists."]}:null]),this.dataTypes=x.g,this.dataTypeKeys=Object.keys(x.g),this.dataTypeSubscription=this.dataType.valueChanges.subscribe(t=>{this.dataTypeChange(t)}),this.dataValueSubscription=this.dataValue.valueChanges.subscribe(t=>{let n=this.getValueOrErrors(t);n instanceof Array||this.dataValueChange(n)})}ngOnInit(){}ngOnDestroy(){this.unsubAll()}getValueOrErrors(t){let n=[],a=null;if(null!=this._data)switch(this.getDataType()){case x.g.Number:try{let s=parseFloat(t);isNaN(s)?n.push("Invalid number"):a=s}catch(s){n.push(`Number parse exception: ${s}`)}break;case x.g.Boolean:"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()?n.push("Invalid boolean"):a="true"===t.toLowerCase();break;default:a=t}return null!=a?a:n}dataValueChange(t){this.data!=t&&(this.data=t,this.dataChange.emit(t))}dataTypeChange(t){this.getDataType()!==t&&(this.data=C.c.dataTypeToData(t),this.dataChange.emit(this.data))}unsubAll(){this.dataTypeSubscription.unsubscribe(),this.dataValueSubscription.unsubscribe()}get ready(){return this.hasData&&null!==this._file}get file(){if(null!=this._file)return this._file;throw new Error("File was not ready")}set file(t){this._file=t}get data(){if(this.hasData)return this._data;throw new Error("Data was not ready")}set data(t){this._data!==t?(this._data=t,this.hasData=!0,this.onData()):this.hasData=!0}onData(){let t=this.getDataType();if(t!==this.dataType.value&&this.dataType.setValue(t),t===x.g.String||t===x.g.Number||t===x.g.Boolean){let n=`${this.data}`;n!==this.dataValue.value&&this.dataValue.setValue(n)}this.regenerateDataKeys(t!==x.g.Object)}getDataType(){return C.c.dataToDataType(this.data)}dataSetKey(t,n){this.data[t]=n,this.file.edited=!0}validFieldName(t){return!(t in this.data)}regenerateDataKeys(t){this.dataKeys=t?[]:Object.keys(this.data).sort(),this.dataKeysSave=[],this.dataKeysDelete=[],this.dataKeysControls=this.dataKeys.map(n=>{let a=new c.NI(n,[s=>this.validFieldName(s.value)||s.value===n?null:{errors:["This field already exists."]}]);return this.dataKeysDelete.push(()=>{delete this.data[n],this.file.edited=!0,this.regenerateDataKeys(!1)}),this.dataKeysSave.push(()=>{if(this.validFieldName(a.value)){let s=this.data[n];delete this.data[n],this.data[a.value]=s,this.file.edited=!0,this.regenerateDataKeys(!1)}}),a}),this.newFieldName.updateValueAndValidity()}addNewField(){let t=this.newFieldName.value,n=this.newFieldType.value;if(this.validFieldName(t)){let a=C.c.dataTypeToData(n);this.data[t]=a,this.newFieldName.setValue(""),this.newFieldType.setValue(x.g.String),this.regenerateDataKeys(!1)}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-data"]],inputs:{file:"file",data:"data"},outputs:{dataChange:"dataChange"},decls:3,vars:3,consts:[["class","type-value",4,"ngIf"],["class","keys",4,"ngIf"],["class","array",4,"ngIf"],[1,"type-value"],["appearance","fill","color","accent"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["class","value","appearance","fill","color","accent",4,"ngIf"],[3,"value"],["appearance","fill","color","accent",1,"value"],["matInput","",3,"formControl"],[4,"ngIf"],[1,"keys"],["class","key",4,"ngFor","ngForOf"],["appearance","fill","color","accent",1,"new-field-type"],["mat-raised-button","",3,"click",4,"ngIf"],[1,"key"],["mat-raised-button","",3,"click"],[3,"file","data","dataChange"],[1,"array"]],template:function(t,n){1&t&&(e.YNc(0,jt,7,3,"div",0),e.YNc(1,ei,13,6,"div",1),e.YNc(2,ti,3,0,"div",2)),2&t&&(e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",n.ready&&"object"===n.getDataType()),e.xp6(1),e.Q6J("ngIf",n.ready&&"array"===n.getDataType()))},directives:[p.O5,m.KE,m.hX,T.gD,c.JJ,c.oH,p.sg,_.ey,O.Nt,c.Fj,m.TO,y.lW,i],styles:['[_nghost-%COMP%]{display:block}.type-value[_ngcontent-%COMP%]{display:flex}.value[_ngcontent-%COMP%]{flex:1;margin-left:10px;min-width:200px}.key[_ngcontent-%COMP%]{margin:5px 0;padding:10px 0 10px 10px;position:relative}.key[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;bottom:0;left:0;width:15px;border:1px solid;border-right:0;border-top-left-radius:5px;border-bottom-left-radius:5px;pointer-events:none}.key[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-left:10px}.new-field-type[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}']}),i})();function ni(i,o){if(1&i&&(e.TgZ(0,"mat-slide-toggle",2),e._uU(1,"Data"),e.qZA()),2&i){const t=e.oxw();e.Q6J("formControl",t.hasData)}}function ai(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-data",3),e.NdJ("dataChange",function(a){return e.CHM(t),e.oxw().dataChange(a)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("file",t.file)("data",t.data[0])}}let oi=(()=>{class i{constructor(){this._data=null,this._file=null,this.previousDataExisted=!1,this.hasData=new c.NI,this.hasDataSubscription=this.hasData.valueChanges.subscribe(t=>{this.hasDataChange(t)})}ngOnInit(){}ngOnDestroy(){this.unsubAll()}unsubAll(){this.hasDataSubscription.unsubscribe()}hasDataChange(t){t?0===this.data.length&&(this.data.push(this.previousDataExisted?this.previousData:{}),this.file.edited=!0):0!==this.data.length&&(this.previousDataExisted=!0,this.previousData=this.data.pop(),this.file.edited=!0)}get ready(){return null!=this._data&&null!==this._file}get file(){if(null!=this._file)return this._file;throw new Error("File was not ready")}set file(t){this._file=t}get data(){if(null!=this._data)return this._data;throw new Error("Data was not ready")}set data(t){this._data=t,this.onData()}onData(){this.hasData.setValue(0!==this.data.length)}dataChange(t){0!==this.data.length&&(this.data[0]=t,this.file.edited=!0)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-other"]],inputs:{file:"file",data:"data"},decls:2,vars:2,consts:[["class","has-data",3,"formControl",4,"ngIf"],[3,"file","data","dataChange",4,"ngIf"],[1,"has-data",3,"formControl"],[3,"file","data","dataChange"]],template:function(t,n){1&t&&(e.YNc(0,ni,2,1,"mat-slide-toggle",0),e.YNc(1,ai,1,2,"app-data",1)),2&t&&(e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",n.ready&&0!==n.data.length))},directives:[p.O5,re,c.JJ,c.oH,ii],styles:["[_nghost-%COMP%]{display:block}.has-data[_ngcontent-%COMP%]{margin-bottom:10px}[_nghost-%COMP%]  .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb{background-color:#607d8b}[_nghost-%COMP%]  .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#607d8b8a}"]}),i})();function si(i,o){if(1&i&&e._UZ(0,"app-type",2),2&i){const t=e.oxw();e.Q6J("event",t.event)("file",t.file)}}function ri(i,o){if(1&i&&e._UZ(0,"app-change-media",3),2&i){const t=e.oxw();e.Q6J("file",t.file)("data",t.event.data)}}function li(i,o){if(1&i&&e._UZ(0,"app-other",3),2&i){const t=e.oxw();e.Q6J("file",t.file)("data",t.event.data)}}let di=(()=>{class i{constructor(){this._event=null,this._file=null}ngOnInit(){}get ready(){return null!=this._event&&null!=this._file}get event(){if(null!=this._event)return this._event;throw new Error("Event not ready")}set event(t){this._event=t}get file(){if(null!=this._file)return this._file;throw new Error("File not ready")}set file(t){this._file=t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit"]],inputs:{event:"event",file:"file"},decls:3,vars:3,consts:[[3,"event","file",4,"ngIf"],[3,"file","data",4,"ngIf"],[3,"event","file"],[3,"file","data"]],template:function(t,n){1&t&&(e.YNc(0,si,1,2,"app-type",0),e.YNc(1,ri,1,2,"app-change-media",1),e.YNc(2,li,1,2,"app-other",1)),2&t&&(e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",n.ready&&"changeMedia"===n.event.type),e.xp6(1),e.Q6J("ngIf",n.ready&&"changeMedia"!==n.event.type))},directives:[p.O5,kt,At,oi],styles:["[_nghost-%COMP%]{overflow:auto}"]}),i})();function ci(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-header",2),e.NdJ("editingChange",function(a){return e.CHM(t),e.oxw().editing=a})("delete",function(){return e.CHM(t),e.oxw().onDelete()}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("event",t.event)("file",t.file)}}function pi(i,o){if(1&i&&e._UZ(0,"app-edit",3),2&i){const t=e.oxw();e.Q6J("event",t.event)("file",t.file)}}let hi=(()=>{class i{constructor(){this._file=null,this._event=null,this.editing=!1,this.delete=new e.vpe}ngOnInit(){}get ready(){return null!=this._event&&null!=this._file}get event(){if(null!=this._event)return this._event;throw new Error("Event not ready")}set event(t){this._event=t}get file(){if(null!=this._file)return this._file;throw new Error("File not ready")}set file(t){this._file=t}onDelete(){let t=this.file.events.indexOf(this.event);-1!==t&&(this.file.events.splice(t,1),this.file.edited=!0,this.delete.emit(!0))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-event"]],inputs:{event:"event",file:"file"},outputs:{delete:"delete"},decls:2,vars:2,consts:[["class","event-head-wrapper",3,"event","file","editingChange","delete",4,"ngIf"],[3,"event","file",4,"ngIf"],[1,"event-head-wrapper",3,"event","file","editingChange","delete"],[3,"event","file"]],template:function(t,n){1&t&&(e.YNc(0,ci,1,2,"app-header",0),e.YNc(1,pi,1,2,"app-edit",1)),2&t&&(e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",n.ready&&n.editing))},directives:[p.O5,Ct,di],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;padding:0 10px}.event-data[_ngcontent-%COMP%]{margin-right:10px}"]}),i})();var G=d(2845),ui=d(3426),_i=d(1221),gi=d(2916),de=d(2986),mi=d(1307),fi=d(13),ce=d(4850);const pe=new Set;let L,bi=(()=>{class i{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Ti}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function vi(i){if(!pe.has(i))try{L||(L=document.createElement("style"),L.setAttribute("type","text/css"),document.head.appendChild(L)),L.sheet&&(L.sheet.insertRule(`@media ${i} {body{ }}`,0),pe.add(i))}catch(o){console.error(o)}}(t),this._matchMedia(t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(A.t4))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Ti(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let yi=(()=>{class i{constructor(t,n){this._mediaMatcher=t,this._zone=n,this._queries=new Map,this._destroySubject=new w.xQ}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return he((0,g.Eq)(t)).some(a=>this._registerQuery(a).mql.matches)}observe(t){const a=he((0,g.Eq)(t)).map(r=>this._registerQuery(r).observable);let s=(0,ui.aj)(a);return s=(0,_i.z)(s.pipe((0,de.q)(1)),s.pipe((0,mi.T)(1),(0,fi.b)(0))),s.pipe((0,ce.U)(r=>{const l={matches:!1,breakpoints:{}};return r.forEach(({matches:h,query:f})=>{l.matches=l.matches||h,l.breakpoints[f]=h}),l}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const n=this._mediaMatcher.matchMedia(t),s={observable:new gi.y(r=>{const l=h=>this._zone.run(()=>r.next(h));return n.addListener(l),()=>{n.removeListener(l)}}).pipe((0,j.O)(n),(0,ce.U)(({matches:r})=>({query:t,matches:r})),(0,b.R)(this._destroySubject)),mql:n};return this._queries.set(t,s),s}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(bi),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function he(i){return i.map(o=>o.split(",")).reduce((o,t)=>o.concat(t)).map(o=>o.trim())}const Ci={tooltipState:(0,u.X$)("state",[(0,u.SB)("initial, void, hidden",(0,u.oB)({opacity:0,transform:"scale(0)"})),(0,u.SB)("visible",(0,u.oB)({transform:"scale(1)"})),(0,u.eR)("* => visible",(0,u.jt)("200ms cubic-bezier(0, 0, 0.2, 1)",(0,u.F4)([(0,u.oB)({opacity:0,transform:"scale(0)",offset:0}),(0,u.oB)({opacity:.5,transform:"scale(0.99)",offset:.5}),(0,u.oB)({opacity:1,transform:"scale(1)",offset:1})]))),(0,u.eR)("* => hidden",(0,u.jt)("100ms cubic-bezier(0, 0, 0.2, 1)",(0,u.oB)({opacity:0})))])},ue="tooltip-panel",_e=(0,A.i$)({passive:!0}),ge=new e.OlP("mat-tooltip-scroll-strategy"),ki={provide:ge,deps:[G.aV],useFactory:function Ii(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}},Pi=new e.OlP("mat-tooltip-default-options",{providedIn:"root",factory:function Di(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let Ai=(()=>{class i{constructor(t,n,a,s,r,l,h,f,v,Y,k,V){this._overlay=t,this._elementRef=n,this._scrollDispatcher=a,this._viewContainerRef=s,this._ngZone=r,this._platform=l,this._ariaDescriber=h,this._focusMonitor=f,this._dir=Y,this._defaultOptions=k,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new w.xQ,this._handleKeydown=H=>{this._isTooltipVisible()&&H.keyCode===F.hY&&!(0,F.Vb)(H)&&(H.preventDefault(),H.stopPropagation(),this._ngZone.run(()=>this.hide(0)))},this._scrollStrategy=v,this._document=V,k&&(k.position&&(this.position=k.position),k.touchGestures&&(this.touchGestures=k.touchGestures)),Y.change.pipe((0,b.R)(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),r.runOutsideAngular(()=>{n.nativeElement.addEventListener("keydown",this._handleKeydown)})}get position(){return this._position}set position(t){var n;t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),null===(n=this._tooltipInstance)||void 0===n||n.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(t){this._disabled=(0,g.Ig)(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=(0,g.su)(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=(0,g.su)(t)}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe((0,b.R)(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),t.removeEventListener("keydown",this._handleKeydown),this._passiveListeners.forEach(([n,a])=>{t.removeEventListener(n,a,_e)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const n=this._createOverlay();this._detach(),this._portal=this._portal||new S.C5(this._tooltipComponent,this._viewContainerRef),this._tooltipInstance=n.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe((0,b.R)(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(t)}hide(t=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(t)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const t=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),n=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(t);return n.positionChanges.pipe((0,b.R)(this._destroyed)).subscribe(a=>{this._updateCurrentPositionClass(a.connectionPair),this._tooltipInstance&&a.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:n,panelClass:`${this._cssClassPrefix}-${ue}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe((0,b.R)(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe((0,b.R)(this._destroyed)).subscribe(()=>{var a;return null===(a=this._tooltipInstance)||void 0===a?void 0:a._handleBodyInteraction()}),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){const n=t.getConfig().positionStrategy,a=this._getOrigin(),s=this._getOverlayPosition();n.withPositions([this._addOffset(Object.assign(Object.assign({},a.main),s.main)),this._addOffset(Object.assign(Object.assign({},a.fallback),s.fallback))])}_addOffset(t){return t}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,n=this.position;let a;"above"==n||"below"==n?a={originX:"center",originY:"above"==n?"top":"bottom"}:"before"==n||"left"==n&&t||"right"==n&&!t?a={originX:"start",originY:"center"}:("after"==n||"right"==n&&t||"left"==n&&!t)&&(a={originX:"end",originY:"center"});const{x:s,y:r}=this._invertPosition(a.originX,a.originY);return{main:a,fallback:{originX:s,originY:r}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,n=this.position;let a;"above"==n?a={overlayX:"center",overlayY:"bottom"}:"below"==n?a={overlayX:"center",overlayY:"top"}:"before"==n||"left"==n&&t||"right"==n&&!t?a={overlayX:"end",overlayY:"center"}:("after"==n||"right"==n&&t||"left"==n&&!t)&&(a={overlayX:"start",overlayY:"center"});const{x:s,y:r}=this._invertPosition(a.overlayX,a.overlayY);return{main:a,fallback:{overlayX:s,overlayY:r}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe((0,de.q)(1),(0,b.R)(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,n){return"above"===this.position||"below"===this.position?"top"===n?n="bottom":"bottom"===n&&(n="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:n}}_updateCurrentPositionClass(t){const{overlayY:n,originX:a,originY:s}=t;let r;if(r="center"===n?this._dir&&"rtl"===this._dir.value?"end"===a?"left":"right":"start"===a?"left":"right":"bottom"===n&&"top"===s?"above":"below",r!==this._currentPosition){const l=this._overlayRef;if(l){const h=`${this._cssClassPrefix}-${ue}-`;l.removePanelClass(h+this._currentPosition),l.addPanelClass(h+r)}this._currentPosition=r}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",()=>this.hide()],["wheel",n=>this._wheelListener(n)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const n=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",n],["touchcancel",n])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([n,a])=>{this._elementRef.nativeElement.addEventListener(n,a,_e)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const n=this._document.elementFromPoint(t.clientX,t.clientY),a=this._elementRef.nativeElement;n!==a&&!a.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const n=this._elementRef.nativeElement,a=n.style;("on"===t||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName)&&(a.userSelect=a.msUserSelect=a.webkitUserSelect=a.MozUserSelect="none"),("on"===t||!n.draggable)&&(a.webkitUserDrag="none"),a.touchAction="none",a.webkitTapHighlightColor="transparent"}}}return i.\u0275fac=function(t){e.$Z()},i.\u0275dir=e.lG2({type:i,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),i})(),Oi=(()=>{class i extends Ai{constructor(t,n,a,s,r,l,h,f,v,Y,k,V){super(t,n,a,s,r,l,h,f,v,Y,k,V),this._tooltipComponent=Si}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(G.aV),e.Y36(e.SBq),e.Y36(B.mF),e.Y36(e.s_b),e.Y36(e.R0b),e.Y36(A.t4),e.Y36(P.$s),e.Y36(P.tE),e.Y36(ge),e.Y36(E.Is,8),e.Y36(Pi,8),e.Y36(p.K0))},i.\u0275dir=e.lG2({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[e.qOj]}),i})(),Zi=(()=>{class i{constructor(t){this._changeDetectorRef=t,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new w.xQ}show(t){clearTimeout(this._hideTimeoutId),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout(()=>{this._visibility="visible",this._showTimeoutId=void 0,this._onShow(),this._markForCheck()},t)}hide(t){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._visibility="hidden",this._hideTimeoutId=void 0,this._markForCheck()},t)}afterHidden(){return this._onHide}isVisible(){return"visible"===this._visibility}ngOnDestroy(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._onHide.complete()}_animationStart(){this._closeOnInteraction=!1}_animationDone(t){const n=t.toState;"hidden"===n&&!this.isVisible()&&this._onHide.next(),("visible"===n||"hidden"===n)&&(this._closeOnInteraction=!0)}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_onShow(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO))},i.\u0275dir=e.lG2({type:i}),i})(),Si=(()=>{class i extends Zi{constructor(t,n){super(t),this._breakpointObserver=n,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(yi))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-tooltip-component"]],hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,n){2&t&&e.Udp("zoom","visible"===n._visibility?1:null)},features:[e.qOj],decls:3,vars:7,consts:[[1,"mat-tooltip",3,"ngClass"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.NdJ("@state.start",function(){return n._animationStart()})("@state.done",function(s){return n._animationDone(s)}),e.ALo(1,"async"),e._uU(2),e.qZA()),2&t){let a;e.ekj("mat-tooltip-handset",null==(a=e.lcZ(1,5,n._isHandset))?null:a.matches),e.Q6J("ngClass",n.tooltipClass)("@state",n._visibility),e.xp6(2),e.Oqu(n.message)}},directives:[p.mk],pipes:[p.Ov],styles:[".mat-tooltip-panel{pointer-events:none !important}.mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}\n"],encapsulation:2,data:{animation:[Ci.tooltipState]},changeDetection:0}),i})(),Ei=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[ki],imports:[[P.rt,p.ez,G.U8,_.BQ],_.BQ,B.ZD]}),i})();function Li(i,o){if(1&i&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Ni(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",16),e.TgZ(1,"mat-select",17),e.NdJ("selectionChange",function(a){return e.CHM(t),e.oxw(2)._changePageSize(a.value)}),e.YNc(2,Li,2,2,"mat-option",18),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("appearance",t._formFieldAppearance)("color",t.color),e.xp6(1),e.Q6J("value",t.pageSize)("disabled",t.disabled)("aria-label",t._intl.itemsPerPageLabel),e.xp6(1),e.Q6J("ngForOf",t._displayedPageSizeOptions)}}function Ri(i,o){if(1&i&&(e.TgZ(0,"div",20),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.pageSize)}}function Fi(i,o){if(1&i&&(e.TgZ(0,"div",12),e.TgZ(1,"div",13),e._uU(2),e.qZA(),e.YNc(3,Ni,3,6,"mat-form-field",14),e.YNc(4,Ri,2,1,"div",15),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",t._intl.itemsPerPageLabel," "),e.xp6(1),e.Q6J("ngIf",t._displayedPageSizeOptions.length>1),e.xp6(1),e.Q6J("ngIf",t._displayedPageSizeOptions.length<=1)}}function Bi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().firstPage()}),e.O4$(),e.TgZ(1,"svg",7),e._UZ(2,"path",22),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("matTooltip",t._intl.firstPageLabel)("matTooltipDisabled",t._previousButtonsDisabled())("matTooltipPosition","above")("disabled",t._previousButtonsDisabled()),e.uIk("aria-label",t._intl.firstPageLabel)}}function Qi(i,o){if(1&i){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().lastPage()}),e.O4$(),e.TgZ(1,"svg",7),e._UZ(2,"path",24),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("matTooltip",t._intl.lastPageLabel)("matTooltipDisabled",t._nextButtonsDisabled())("matTooltipPosition","above")("disabled",t._nextButtonsDisabled()),e.uIk("aria-label",t._intl.lastPageLabel)}}let J=(()=>{class i{constructor(){this.changes=new w.xQ,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,n,a)=>{if(0==a||0==n)return`0 of ${a}`;const s=t*n;return`${s+1} \u2013 ${s<(a=Math.max(a,0))?Math.min(s+n,a):s+n} of ${a}`}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ji={provide:J,deps:[[new e.FiY,new e.tp0,J]],useFactory:function qi(i){return i||new J}},Hi=new e.OlP("MAT_PAGINATOR_DEFAULT_OPTIONS"),zi=(0,_.Id)((0,_.dB)(class{}));let Ui=(()=>{class i extends zi{constructor(t,n,a){if(super(),this._intl=t,this._changeDetectorRef=n,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.page=new e.vpe,this._intlChanges=t.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),a){const{pageSize:s,pageSizeOptions:r,hidePageSize:l,showFirstLastButtons:h}=a;null!=s&&(this._pageSize=s),null!=r&&(this._pageSizeOptions=r),null!=l&&(this._hidePageSize=l),null!=h&&(this._showFirstLastButtons=h)}}get pageIndex(){return this._pageIndex}set pageIndex(t){this._pageIndex=Math.max((0,g.su)(t),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(t){this._length=(0,g.su)(t),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(t){this._pageSize=Math.max((0,g.su)(t),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(t){this._pageSizeOptions=(t||[]).map(n=>(0,g.su)(n)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(t){this._hidePageSize=(0,g.Ig)(t)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(t){this._showFirstLastButtons=(0,g.Ig)(t)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(t)}previousPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(t)}firstPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=0,this._emitPageEvent(t)}lastPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(t)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const t=this.getNumberOfPages()-1;return this.pageIndex<t&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(t){const a=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/t)||0,this.pageSize=t,this._emitPageEvent(a)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((t,n)=>t-n),this._changeDetectorRef.markForCheck())}_emitPageEvent(t){this.page.emit({previousPageIndex:t,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return i.\u0275fac=function(t){e.$Z()},i.\u0275dir=e.lG2({type:i,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons"},outputs:{page:"page"},features:[e.qOj]}),i})(),ji=(()=>{class i extends Ui{constructor(t,n,a){super(t,n,a),a&&null!=a.formFieldAppearance&&(this._formFieldAppearance=a.formFieldAppearance)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(J),e.Y36(e.sBO),e.Y36(Hi,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[e.qOj],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,Fi,5,3,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e._uU(5),e.qZA(),e.YNc(6,Bi,3,5,"button",5),e.TgZ(7,"button",6),e.NdJ("click",function(){return n.previousPage()}),e.O4$(),e.TgZ(8,"svg",7),e._UZ(9,"path",8),e.qZA(),e.qZA(),e.kcU(),e.TgZ(10,"button",9),e.NdJ("click",function(){return n.nextPage()}),e.O4$(),e.TgZ(11,"svg",7),e._UZ(12,"path",10),e.qZA(),e.qZA(),e.YNc(13,Qi,3,5,"button",11),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",!n.hidePageSize),e.xp6(3),e.hij(" ",n._intl.getRangeLabel(n.pageIndex,n.pageSize,n.length)," "),e.xp6(1),e.Q6J("ngIf",n.showFirstLastButtons),e.xp6(1),e.Q6J("matTooltip",n._intl.previousPageLabel)("matTooltipDisabled",n._previousButtonsDisabled())("matTooltipPosition","above")("disabled",n._previousButtonsDisabled()),e.uIk("aria-label",n._intl.previousPageLabel),e.xp6(3),e.Q6J("matTooltip",n._intl.nextPageLabel)("matTooltipDisabled",n._nextButtonsDisabled())("matTooltipPosition","above")("disabled",n._nextButtonsDisabled()),e.uIk("aria-label",n._intl.nextPageLabel),e.xp6(3),e.Q6J("ngIf",n.showFirstLastButtons))},directives:[p.O5,y.lW,Oi,m.KE,T.gD,p.sg,_.ey],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}\n"],encapsulation:2,changeDetection:0}),i})(),Gi=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Ji],imports:[[p.ez,y.ot,T.LD,Ei,_.BQ]]}),i})();function Vi(i,o){if(1&i&&(e.TgZ(0,"mat-form-field",3),e.TgZ(1,"mat-label"),e._uU(2,"Events filter"),e.qZA(),e.TgZ(3,"mat-select",4),e.TgZ(4,"mat-option",5),e._uU(5,"Only ChangeMedia"),e.qZA(),e.TgZ(6,"mat-option",6),e._uU(7,"All events"),e.qZA(),e.TgZ(8,"mat-option",7),e._uU(9,"Custom Filter"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("formControl",t.filterEvents)}}function $i(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-event",10),e.NdJ("delete",function(){return e.CHM(t),e.oxw(2).onEventDelete()}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("file",n.file)("event",t)}}function Ki(i,o){if(1&i&&(e.TgZ(0,"div",8),e.YNc(1,$i,1,2,"app-event",9),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.getShownEvents())}}function Wi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-paginator",11),e.NdJ("page",function(a){return e.CHM(t),e.oxw().ETC.pageEvent=a}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("pageIndex",t.ETC.pageEvent.pageIndex)("length",t.eventsFiltered.length)("pageSize",t.ETC.pageEvent.pageSize)("pageSizeOptions",t.ETC.pageSizeOptions)}}var Z=(()=>{return(i=Z||(Z={})).ChangeMedia="media",i.All="all",i.CustomFilter="custom",Z;var i})();class M{constructor(){this.ETC=M,this.filterEvents=new c.NI,this.eventsFiltered=[],this.filterEventsSubscription=this.filterEvents.valueChanges.subscribe(o=>{this.filterEventsChange(o)}),this._file=null}ngOnInit(){}ngOnDestroy(){this.unsubAll()}unsubAll(){this.filterEventsSubscription.unsubscribe()}get ready(){return null!=this._file}get file(){if(null!=this._file)return this._file;throw new Error("File was not ready")}set file(o){this._file=o,this.onFile()}filterEventsChange(o){switch(this.ETC.pageEvent.pageIndex=0,o){case Z.ChangeMedia:this.eventsFiltered=this.file.events.filter(t=>"changeMedia"===t.type);break;case Z.All:case Z.CustomFilter:this.eventsFiltered=this.file.events}}getShownEvents(){let o=this.ETC.pageEvent,t=o.pageIndex*o.pageSize,n=t+o.pageSize;return this.eventsFiltered.filter((a,s)=>s>=t&&s<n)}onEventDelete(){let o=this.ETC.pageEvent,t=o.pageIndex;this.filterEventsChange(this.filterEvents.value),this.eventsFiltered.length===t*o.pageSize&&t--,this.ETC.pageEvent.pageIndex=t}onFile(){this.filterEvents.setValue(Z.ChangeMedia)}}M.pageSizeOptions=[10,25,50,100],M.pageEvent={pageIndex:0,pageSize:M.pageSizeOptions[1],previousPageIndex:0,length:0},M.\u0275fac=function(o){return new(o||M)},M.\u0275cmp=e.Xpm({type:M,selectors:[["app-events-tab"]],inputs:{file:"file"},decls:3,vars:3,consts:[["appearance","fill","color","accent",4,"ngIf"],["class","events",4,"ngIf"],["aria-label","Select page",3,"pageIndex","length","pageSize","pageSizeOptions","page",4,"ngIf"],["appearance","fill","color","accent"],[3,"formControl"],["value","media"],["value","all"],["value","custom"],[1,"events"],["class","event",3,"file","event","delete",4,"ngFor","ngForOf"],[1,"event",3,"file","event","delete"],["aria-label","Select page",3,"pageIndex","length","pageSize","pageSizeOptions","page"]],template:function(o,t){1&o&&(e.YNc(0,Vi,10,1,"mat-form-field",0),e.YNc(1,Ki,2,1,"div",1),e.YNc(2,Wi,1,4,"mat-paginator",2)),2&o&&(e.Q6J("ngIf",t.ready),e.xp6(1),e.Q6J("ngIf",t.ready),e.xp6(1),e.Q6J("ngIf",t.ready))},directives:[p.O5,m.KE,m.hX,T.gD,c.JJ,c.oH,_.ey,p.sg,hi,ji],styles:["[_nghost-%COMP%]{height:100%;overflow:hidden;display:flex;flex-direction:column}.events[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden}.event[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid white}"]});var N=d(5861);function Xi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"button",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().checkAllClick()}),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.tpaChecking?"Stop":"Check All")}}function en(i,o){1&i&&(e.TgZ(0,"div",10),e._uU(1,"Non Youtube"),e.qZA())}function tn(i,o){1&i&&(e.TgZ(0,"div",10),e._uU(1,"Checking..."),e.qZA())}function nn(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(2).checkItemClick(a)}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("disabled",!!n.tpaChecking&&!t.checking),e.xp6(1),e.hij(" ",t.checking?"Stop":"Check"," ")}}function an(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit;return a.open=!a.open}),e.TgZ(1,"mat-icon"),e._uU(2,"expand_more"),e.qZA(),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Tol("item-expand"+(t.open?" open":""))}}function on(i,o){if(1&i&&(e.TgZ(0,"div",7),e.TgZ(1,"a",18),e._uU(2),e.qZA(),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("href",t.url,e.LSH),e.xp6(1),e.Oqu(t.name)}}function sn(i,o){if(1&i&&(e.TgZ(0,"div",16),e._uU(1," Links: "),e.YNc(2,on,3,2,"div",17),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngForOf",t.tpaLinks)}}function rn(i,o){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",6),e.TgZ(2,"div",7),e.TgZ(3,"a",8),e._uU(4),e.qZA(),e.qZA(),e.YNc(5,en,2,0,"div",9),e.YNc(6,tn,2,0,"div",9),e.TgZ(7,"div",10),e._uU(8),e.qZA(),e.YNc(9,nn,2,2,"button",11),e.YNc(10,an,3,2,"button",12),e.qZA(),e.YNc(11,sn,3,1,"div",13),e.qZA()),2&i){const t=o.$implicit;e.Tol("tpa-list-item"+(""===t.error?"":" error")+(t.checked?" checked":"")),e.xp6(3),e.Q6J("href",t.url,e.LSH),e.xp6(1),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf","yt"!==t.type),e.xp6(1),e.Q6J("ngIf",t.checking),e.xp6(2),e.Oqu(""===t.error?t.checked?"OK":"":t.error),e.xp6(1),e.Q6J("ngIf",!t.checked&&"yt"===t.type),e.xp6(1),e.Q6J("ngIf",t.checked&&""===t.error),e.xp6(1),e.Q6J("ngIf",t.open&&0!==t.tpaLinks.length)}}function ln(i,o){if(1&i&&(e.TgZ(0,"div",4),e._uU(1),e.YNc(2,rn,12,10,"div",5),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",0===t.changeMediaList.length?"No media":""," "),e.xp6(1),e.Q6J("ngForOf",t.changeMediaList)}}let dn=(()=>{class i{constructor(){this._file=null,this.stopChecking=()=>{},this.stopAllChecking=null,this.tpaChecking=!1,this.changeMediaList=[],this.tpaCheckingChange=new e.vpe}ngOnInit(){}ngOnDestroy(){this.stopAnyChecking()}get ready(){return null!=this._file}get file(){if(null!=this._file)return this._file;throw new Error("File was not ready")}set file(t){this._file=t,this.onFile()}onFile(){this.stopAnyChecking();let t=[];this.file.events.filter(n=>"changeMedia"===n.type).forEach(n=>{let a=n.data[0];if(!t.some(s=>a.type==s.type&&a.id===s.id)){let s=C.c.mediaToUrl(this.file.site,C.c.pageVersion(this.file.site,this.file.start),a);t.push({name:a.title,url:s,id:a.id,type:a.type,checked:!1,checking:!1,open:!1,error:"",tpaLinks:[]})}this.changeMediaList=t})}checkAllClick(){var t=this;return(0,N.Z)(function*(){t.tpaChecking?t.stopAnyChecking():(t.tpaChecking=!0,t.tpaCheckingChange.emit(!0),yield t.checkAll(),t.tpaChecking=!1,t.tpaCheckingChange.emit(!1))})()}checkItemClick(t){var n=this;return(0,N.Z)(function*(){t.checking?n.stopAnyChecking():(n.tpaChecking=!0,n.tpaCheckingChange.emit(!0),yield n.checkItem(t),t.checked&&""===t.error&&(t.open=!0),n.tpaChecking=!1,n.tpaCheckingChange.emit(!1))})()}checkAll(){var t=this;return(0,N.Z)(function*(){yield new Promise(function(){var n=(0,N.Z)(function*(a){let s=!0;t.stopAllChecking=()=>{s=!1,t.stopChecking(),t.stopAllChecking=()=>{},a()};for(const r of t.changeMediaList.filter(l=>"yt"===l.type&&!l.checked)){if(!s)break;yield t.checkItem(r)}s&&null!=t.stopAllChecking&&t.stopAllChecking()});return function(a){return n.apply(this,arguments)}}())})()}checkItem(t){var n=this;return(0,N.Z)(function*(){yield new Promise(function(){var a=(0,N.Z)(function*(s){n.stopChecking=()=>{t.checking=!1,n.stopChecking=()=>{},s()},t.checking=!0,t.error="";let r=new URL("https://tpa.mares.workers.dev/");r.searchParams.set("id",t.id);try{let h,l=0;for(;;){l++;try{h=yield fetch(r.toString());break}catch(f){if(l>3)throw f;if(yield new Promise(v=>window.setTimeout(v,1e4*l)),!t.checking)break}}if(t.checking&&null!=h){const f=yield h.json();t.checking&&("error"in f?(t.checked=!0,t.error=f.error,n.stopChecking()):(t.checked=!0,t.tpaLinks=f.map(v=>({name:v.fileName,url:"https://new.theponyarchive.com"+v.filePath+encodeURIComponent(v.fileName)})),n.stopChecking()))}}catch(l){console.error("Exception:",l),t.error="Unknown error occured",t.checking&&n.stopChecking()}});return function(s){return a.apply(this,arguments)}}())})()}stopAnyChecking(){null!=this.stopAllChecking?this.stopAllChecking():this.stopChecking()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-tpa-check-tab"]],inputs:{file:"file"},outputs:{tpaCheckingChange:"tpaCheckingChange"},decls:2,vars:2,consts:[["class","check-all",4,"ngIf"],["class","tpa-list",4,"ngIf"],[1,"check-all"],["mat-raised-button","",3,"click"],[1,"tpa-list"],[3,"class",4,"ngFor","ngForOf"],[1,"tpa-header"],[1,"link"],["target","_blank",3,"href"],["class","status",4,"ngIf"],[1,"status"],["mat-raised-button","",3,"disabled","click",4,"ngIf"],["mat-icon-button","","class","show-hide",3,"click",4,"ngIf"],["class","tpa-links",4,"ngIf"],["mat-raised-button","",3,"disabled","click"],["mat-icon-button","",1,"show-hide",3,"click"],[1,"tpa-links"],["class","link",4,"ngFor","ngForOf"],["target","blank",3,"href"]],template:function(t,n){1&t&&(e.YNc(0,Xi,3,1,"div",0),e.YNc(1,ln,3,2,"div",1)),2&t&&(e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",n.ready))},directives:[p.O5,y.lW,p.sg,Q.Hw],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}.check-all[_ngcontent-%COMP%]{padding:5px 10px}.tpa-list[_ngcontent-%COMP%]{flex:1;overflow:auto;padding:0 10px}.tpa-list-item[_ngcontent-%COMP%]{margin:5px 0;padding:5px;border:1px solid;border-radius:5px}.tpa-list-item.checked[_ngcontent-%COMP%]:not(.error){background-color:#24ae4780}.tpa-list-item.error[_ngcontent-%COMP%]{background-color:#ff5d2880}.tpa-header[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:36px}.tpa-header[_ngcontent-%COMP%] > .link[_ngcontent-%COMP%]{flex:1}.link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.item-expand[_ngcontent-%COMP%]{transition:transform .15s ease-in-out;transform:rotate(0)}.item-expand.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.tpa-links[_ngcontent-%COMP%]{display:flex;flex-direction:column}.tpa-links[_ngcontent-%COMP%] > .link[_ngcontent-%COMP%]{word-break:break-all;padding:5px 0}.tpa-links[_ngcontent-%COMP%] > .link[_ngcontent-%COMP%]:not(:last-child){border-bottom:2px solid yellow}.status[_ngcontent-%COMP%]{margin:0 5px}"]}),i})();function cn(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab-group"),e.TgZ(1,"mat-tab",2),e._UZ(2,"app-file-tab",3),e.qZA(),e.TgZ(3,"mat-tab",4),e._UZ(4,"app-events-tab",3),e.qZA(),e.TgZ(5,"mat-tab",5),e.TgZ(6,"app-tpa-check-tab",6),e.NdJ("tpaCheckingChange",function(a){return e.CHM(t),e.oxw().tpaChecking=a}),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.tpaChecking),e.xp6(1),e.Q6J("file",t.file),e.xp6(1),e.Q6J("disabled",t.tpaChecking),e.xp6(1),e.Q6J("file",t.file),e.xp6(2),e.Q6J("file",t.file)}}function pn(i,o){1&i&&(e.TgZ(0,"div",7),e._uU(1," No files selected.\n"),e.qZA())}let hn=(()=>{class i{constructor(t){this.navItems=t,this.file=null,this.tpaChecking=!1,this.navItems.onlyFileSelectConfig(),this.selectedFileSubscription=this.navItems.fileList.selectedChanges.subscribe(n=>{this.fileChange(n)}),null!=this.navItems.fileList.selected&&this.fileChange(this.navItems.fileList.selected)}ngOnInit(){}ngOnDestroy(){this.unsubFromAll()}unsubFromAll(){this.selectedFileSubscription.unsubscribe()}fileChange(t){this.file=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(me.Y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-tools"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","no-file",4,"ngIf"],["label","File",3,"disabled"],[3,"file"],["label","Events",3,"disabled"],["label","TPA Check"],[3,"file","tpaCheckingChange"],[1,"no-file"]],template:function(t,n){1&t&&(e.YNc(0,cn,7,5,"mat-tab-group",0),e.YNc(1,pn,2,0,"div",1)),2&t&&(e.Q6J("ngIf",null!=n.file),e.xp6(1),e.Q6J("ngIf",null==n.file))},directives:[p.O5,tt,ee,mt,M,dn],styles:["[_nghost-%COMP%]{height:100%;display:flex;overflow:hidden}.mat-tab-group[_ngcontent-%COMP%]{width:100%}*[_ngcontent-%COMP%]  .mat-tab-body-wrapper{height:100%}.no-file[_ngcontent-%COMP%]{flex:1;align-self:center;text-align:center;font-size:3em;line-height:1em}"]}),i})();var un=d(8555);let _n=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,y.ot,Q.Ps]]}),i})(),gn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,m.lN,O.c,c.u5,c.UX,T.LD]]}),i})(),mn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez]]}),i})(),fn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,m.lN,O.c,c.u5,c.UX,T.LD,y.ot]]}),i})(),bn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,Yt,fn,c.u5,c.UX]]}),i})(),vn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,gn,mn,bn]]}),i})(),Tn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,y.ot,Q.Ps,m.lN,O.c,c.u5,c.UX,T.LD,_n,vn]]}),i})(),yn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,m.lN,c.u5,c.UX,T.LD,Gi,Tn]]}),i})(),xn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,m.lN,O.c,c.u5,c.UX,T.LD,y.ot]]}),i})(),Cn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,y.ot,Q.Ps]]}),i})();const Mn=[{path:"",component:hn}];let wn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,un.Bz.forChild(Mn),it,yn,xn,Cn]]}),i})()}}]);